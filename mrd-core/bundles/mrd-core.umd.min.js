!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs/operators"),require("underscore"),require("rxjs"),require("@angular/forms"),require("moment")):"function"==typeof define&&define.amd?define("mrd-core",["exports","rxjs/operators","underscore","rxjs","@angular/forms","moment"],e):e((t=t||self)["mrd-core"]={},t.rxjs.operators,t.underscore,t.rxjs,t.ng.forms,t.moment)}(this,(function(t,e,r,i,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function a(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function u(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function h(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}var c=function(){function t(){}return t.subscribeAs=function(t,i,n){var o=this,s=i.pipe(e.take(1),e.finalize((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];r.isFunction(n.onFinished)&&(n.onFinished.apply(n,l(e)),s&&o.deleteSubscription(t))}))).subscribe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.isFunction(n.onSuccess)&&n.onSuccess.apply(n,l(t))}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.isFunction(n.onError)&&n.onError.apply(n,l(t))}));return this.pushSubscription(t,s),s},t.subscribe=function(t,i){var n=this,o=t.pipe(e.take(1),e.finalize((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.isFunction(i.onFinished)&&(i.onFinished.apply(i,l(t)),o&&n.deleteSubscription(name))}))).subscribe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.isFunction(i.onSuccess)&&i.onSuccess.apply(i,l(t))}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.isFunction(i.onError)&&i.onError.apply(i,l(t))}));return o},t.pushSubscription=function(e,r){this.deleteSubscription(e),t.subscriptions[e]=r},t.deleteSubscription=function(e){var r=t.subscriptions[e];r&&(r.unsubscribe(),delete t.subscriptions[e])},t.subscriptions={},t}();var p=function(){function t(){}return t.isDefined=function(t){return null!=t},t.armUrlWithSearchParams=function(t,e){return!e||r.isEmpty(e)?t:(r.each(e,(function(e,r){var i=-1===t.indexOf("?")?"?":"&";t=""+t+i+r+"="+e})),t)},t.createEntityUrl=function(t,e){return t+"/"+e},t.getBrowser=function(){var t,e=navigator.userAgent,r=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===r[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&r.splice(1,1,t[1]),r.join(" "))},t.getCurrentUnixTimestamp=function(){return Math.round((new Date).getTime()/1e3)},t.guid=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.transformUmlaute=function(t){return t.replace("Ä","Ae").replace("ä","ae").replace("Ö","Oe").replace("ö","oe").replace("Ü","Ue").replace("ü","ue")},t.sortAlpabetically=function(t,e){var i=this;return r.sortBy(t,(function(t){return i.transformUmlaute(t[e]).toUpperCase()}))},t}(),f=function(){function t(t,e){this.identifier=t,this.transform=e,this.onChanged=new i.Subject,this.items$={},this.transformedItems$=[]}return t.prototype.updateItems=function(t){var e,r;this.clear(),t=t||[];try{for(var i=u(t),n=i.next();!n.done;n=i.next()){var o=n.value;this.items$[o[this.identifier]]=o}}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}this.internalTransform$()},t.prototype.clear=function(){this.items$={},this.transformedItems$=[]},t.prototype.remove=function(t){t&&(delete this.items$[t[this.identifier]],this.internalTransform$())},t.prototype.removeByIdentifier=function(t){p.isDefined(t)&&(delete this.items$[t],this.internalTransform$())},t.prototype.update=function(t){t&&(this.items$[t[this.identifier]]=t,this.internalTransform$())},t.prototype.push=function(t){t&&(this.items$[t[this.identifier]]=t,this.internalTransform$())},t.prototype.internalTransform$=function(){this.transformedItems$=Object.values(this.items$),this.transform&&(this.transformedItems$=this.transform(this.transformedItems$)),this.onChanged.next(this.transformedItems$)},Object.defineProperty(t.prototype,"items",{get:function(){return this.transformedItems$},enumerable:!0,configurable:!0}),t}();var d=function(){function t(t,e,r,i){this.http=t,this.url=e,this.observer=r,this.identifier=i}return t.prototype.create=function(t,r,i){var n=this;return this.observer.isCreatingItem=!0,this.http.post(p.armUrlWithSearchParams(this.url,r),t,i).pipe(e.tap((function(t){n.observer.onItemCreated.next(t)})),e.finalize((function(){n.observer.isCreatingItem=!1})))},t.prototype.destroy=function(t,r,i){var n=this;return this.observer.isDestoyingItem=!0,this.http.delete(p.armUrlWithSearchParams(p.createEntityUrl(this.url,t),r),i).pipe(e.tap((function(){n.observer.onItemDestroyed.next(t)})),e.finalize((function(){n.observer.isDestoyingItem=!1})))},t.prototype.partialUpdate=function(t,r,i){var n=this;return this.observer.isPartiallyUpdatingItem=!0,this.http.patch(p.armUrlWithSearchParams(p.createEntityUrl(this.url,t[this.identifier]),r),t,i).pipe(e.tap((function(t){n.observer.onItemPartialUpdated.next(t)})),e.finalize((function(){n.observer.isPartiallyUpdatingItem=!1})))},t.prototype.save=function(t,r,i){var n=this;return this.observer.isSavingItem=!0,(p.isDefined(t[this.identifier])?this.update(t,r,i):this.create(t,r,i)).pipe(e.tap((function(t){n.observer.onItemSaved.next(t)})),e.finalize((function(){n.observer.isSavingItem=!1})))},t.prototype.set=function(t,r,i){var n=this;return this.observer.isSavingItem=!0,this.observer.isUpdatingItem=!0,this.http.put(p.armUrlWithSearchParams(this.url,r),t,i).pipe(e.tap((function(t){n.observer.onItemUpdated.next(t)})),e.finalize((function(){n.observer.isUpdatingItem=!1}))).pipe(e.tap((function(t){n.observer.onItemSaved.next(t)})),e.finalize((function(){n.observer.isSavingItem=!1})))},t.prototype.update=function(t,r,i){var n=this;return this.observer.isUpdatingItem=!0,this.http.put(p.armUrlWithSearchParams(p.createEntityUrl(this.url,t[this.identifier]),r),t,i).pipe(e.tap((function(t){n.observer.onItemUpdated.next(t)})),e.finalize((function(){n.observer.isUpdatingItem=!1})))},t}();var v=function(t,e,r){this.onSuccess=t,this.onError=e,this.onFinished=r};var m=function(){function t(){this.$unsubscribe=new i.Subject}return t.prototype.watch=function(t,r){return t.pipe(e.takeUntil(this.$unsubscribe),e.finalize((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.onFinished&&r.onFinished.apply(r,l(t))}))).subscribe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.onSuccess&&r.onSuccess.apply(r,l(t))}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.onError&&r.onError.apply(r,l(t))}))},t.prototype.subscribe=function(t,e){return c.subscribe(t,e)},t.prototype.subscribeAs=function(t,e,r){return c.subscribeAs(t,e,r)},t.prototype.ngOnDestroy=function(){this.$unsubscribe.next(),this.$unsubscribe.complete()},t}();var y=function(){function t(t){this.hasError=!1,this.error="Pflichtfeld",t&&(this.error=t)}return t.prototype.validator=function(){var t=this;return(function(e){return t.value=e.value,t.validate()})},t.prototype.validate=function(){return r.isDate(this.value)?(this.hasError=!1,null):o.isMoment(this.value)?(this.hasError=!1,null):r.isNumber(this.value)?(this.hasError=!1,null):r.isString(this.value)?this.value.length>0?(this.hasError=!1,null):(this.hasError=!0,{required:!0}):r.isBoolean(this.value)?(this.hasError=!1,null):!this.value||r.isEmpty(this.value)?(this.hasError=!0,{required:!0}):(this.hasError=!1,null)},t}();var b=function(){function t(){}return t.prototype.initialize=function(t,e){this.control=new n.FormControl(t,null,null),this.validateWith(e),this.setValue(t)},t.prototype.validateWith=function(t){var e=this;return void 0===t&&(t=[]),this.validators$=t,this.control.setValidators(r.map(t,(function(t){return t.validator()}))),this.required$=!1,r.each(this.validators$,(function(t){t instanceof y&&(e.required$=!0)})),this.control.updateValueAndValidity(),this},t.prototype.setValue=function(t){return this.showAs?this.control.setValue(this.showAs(t)):this.control.setValue(t),this},t.prototype.reset=function(t){return this.showAs?this.control.reset(this.showAs(t)):this.control.reset(t),this},t.prototype.markAsUsed=function(){return this.control.markAsDirty(),this.control.markAsTouched(),this.control.updateValueAndValidity(),this},t.prototype.markAsUnused=function(){return r.each(this.validators$,(function(t){return t.hasError=!1})),this.control.updateValueAndValidity(),this.control.markAsPristine(),this.control.markAsUntouched(),this},t.prototype.markAsDirty=function(){return this.control.markAsDirty(),this},t.prototype.markAsTouched=function(){return this.control.markAsTouched(),this},t.prototype.disable=function(){return this.control.disable(),this},t.prototype.enable=function(){return this.control.enable(),this},Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return!!this.control.disabled||!this.error},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.validators$},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return r.find(this.validators$,(function(t){return t.hasError}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.convertTo?this.convertTo(this.control.value):this.control.value},set:function(t){this.setValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.required$},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control.dirty},enumerable:!0,configurable:!0}),t}();var g=function(){function t(){}return t.prototype.initialize=function(t){this.control=new n.FormGroup(r.mapObject(t,(function(t){return t.control}))),this.fields$=t},t.prototype.markAsUsed=function(){return r.each(this.fields$,(function(t){return t.markAsUsed()})),this},t.prototype.markAsUnused=function(){return r.each(this.fields$,(function(t){return t.markAsUnused()})),this},t.prototype.markAsDirty=function(){return r.each(this.fields$,(function(t){return t.markAsDirty()})),this},t.prototype.markAsTouched=function(){return r.each(this.fields$,(function(t){return t.markAsTouched()})),this},t.prototype.reset=function(t){return p.isDefined(t)||(t={}),r.each(this.fields$,(function(e,r){return e.reset(t[r])})),this},Object.defineProperty(t.prototype,"fields",{get:function(){return this.fields$},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t={};return r.each(this.fields$,(function(e,r){return t[r]=e.value})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control.touched},enumerable:!0,configurable:!0}),t.prototype.disable=function(){},t.prototype.enable=function(){},t}();var I=function(){function t(){}return t.prototype.initialize=function(t){this.control=new n.FormArray([]),this.type=t,this.entries$=[]},t.prototype.push=function(t){var e=this.generateFormEntry(t);return this.control.push(e.control),this.entries$.push(e),e},t.prototype.removeAt=function(t){var e,i;this.control.removeAt(t),this.entries$=r.reject(this.entries$,(function(e,r){return r===t}));var n=!1;try{for(var o=u(this.entries$),s=o.next();!s.done;s=o.next()){var a=s.value;n=n||a.dirty}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}n?this.markAsUsed():this.markAsUnused()},t.prototype.generateFormEntry=function(t){var e=new this.type;return e.reset(t),e},Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t,e,r=[];try{for(var i=u(this.entries$),n=i.next();!n.done;n=i.next()){var o=n.value;r.push(o.value)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entries",{get:function(){return this.entries$},enumerable:!0,configurable:!0}),t.prototype.disable=function(){return this.control.disable(),this},t.prototype.enable=function(){var t,e;this.control.enable();try{for(var r=u(this.entries$),i=r.next();!i.done;i=r.next()){i.value.enable()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this},t.prototype.markAsDirty=function(){var t,e;this.control.markAsDirty();try{for(var r=u(this.entries$),i=r.next();!i.done;i=r.next()){i.value.markAsDirty()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this},t.prototype.markAsTouched=function(){var t,e;this.control.markAsTouched();try{for(var r=u(this.entries$),i=r.next();!i.done;i=r.next()){i.value.markAsTouched()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this},t.prototype.markAsUnused=function(){var t,e;this.control.markAsUntouched(),this.control.markAsPristine();try{for(var r=u(this.entries$),i=r.next();!i.done;i=r.next()){i.value.markAsUnused()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this},t.prototype.markAsUsed=function(){var t,e;this.control.markAsTouched(),this.control.markAsDirty();try{for(var r=u(this.entries$),i=r.next();!i.done;i=r.next()){i.value.markAsUsed()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this},t.prototype.reset=function(t){var e,i;if(this.entries$=[],this.control.reset([]),p.isDefined(t)&&r.isArray(t))try{for(var n=u(t),o=n.next();!o.done;o=n.next()){var s=o.value;this.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return this},t}();var E=function(){function t(){this.onItemFetched=new i.Subject,this.onItemsFetched=new i.Subject,this.isFetchingItem$=!1,this.isFetchingItems$=!1}return t.prototype.isActivate=function(){return!this.isFetchingItem&&!this.isFetchingItems},Object.defineProperty(t.prototype,"isFetchingItems",{get:function(){return this.isFetchingItems$},set:function(t){this.isFetchingItems$=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFetchingItem",{get:function(){return this.isFetchingItem$},set:function(t){this.isFetchingItem$=t},enumerable:!0,configurable:!0}),t}();var A=function(){function t(t,e,r){this.http=t,this.url=e,this.observer=r}return t.prototype.all=function(t,r){var i=this;return this.observer.isFetchingItems=!0,this.http.get(p.armUrlWithSearchParams(this.url,t),r).pipe(e.tap((function(t){i.observer.onItemsFetched.next(t)})),e.finalize((function(){i.observer.isFetchingItems=!1})))},t.prototype.show=function(t,r,i){var n=this;return this.observer.isFetchingItem=!0,this.http.get(p.armUrlWithSearchParams(p.createEntityUrl(this.url,t),r),i).pipe(e.tap((function(t){n.observer.onItemFetched.next(t)})),e.finalize((function(){n.observer.isFetchingItem=!1})))},t}();var S=function(t){function e(e){var r=t.call(this)||this;return r.observer=p.isDefined(e)?e:new E,r}return a(e,t),e.prototype.all=function(t,e){return new A(this.http,this.url,this.observer).all(t,e)},e.prototype.show=function(t,e,r){return new A(this.http,this.url,this.observer).show(t,e,r)},e}(m);var C=function(t){function e(){var e=t.call(this)||this;return e.onItemCreated=new i.Subject,e.onItemUpdated=new i.Subject,e.onItemDestroyed=new i.Subject,e.onItemPartialUpdated=new i.Subject,e.onItemSaved=new i.Subject,e.isCreatingItem$=!1,e.isUpdatingItem$=!1,e.isDestoyingItem$=!1,e.isPartiallyUpdatingItem$=!1,e}return a(e,t),e.prototype.isActivate=function(){return t.prototype.isActivate.call(this)&&!this.isCreatingItem$&&!this.isUpdatingItem$&&!this.isDestoyingItem$&&!this.isPartiallyUpdatingItem$&&!this.isSavingItem$},Object.defineProperty(e.prototype,"isCreatingItem",{get:function(){return this.isCreatingItem$},set:function(t){this.isCreatingItem$=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpdatingItem",{get:function(){return this.isUpdatingItem$},set:function(t){this.isUpdatingItem$=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDestoyingItem",{get:function(){return this.isDestoyingItem$},set:function(t){this.isDestoyingItem$=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPartiallyUpdatingItem",{get:function(){return this.isPartiallyUpdatingItem$},set:function(t){this.isPartiallyUpdatingItem$=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSavingItem",{get:function(){return this.isSavingItem$},set:function(t){this.isSavingItem$=t},enumerable:!0,configurable:!0}),e}(E);var $=function(t){function e(){return t.call(this,new C)||this}return a(e,t),e.prototype.create=function(t,e,r){return new d(this.http,this.url,this.observer,this.identifier).create(t,e,r)},e.prototype.destroy=function(t,e,r){return new d(this.http,this.url,this.observer,this.identifier).destroy(t,e,r)},e.prototype.partialUpdate=function(t,e,r){return new d(this.http,this.url,this.observer,this.identifier).partialUpdate(t,e,r)},e.prototype.save=function(t,e,r){return new d(this.http,this.url,this.observer,this.identifier).save(t,e,r)},e.prototype.update=function(t,e,r){return new d(this.http,this.url,this.observer,this.identifier).update(t,e,r)},e}(S);var w=function(){function t(){this.hasError=!1}return t.prototype.validator=function(){return null},t.prototype.validate=function(){return null},t}();var U={NUMBER:/^-?[0-9]+([,.][0-9]+)?$/,INPUT_NUMBER:/^[0-9]+(,[0-9]+)?$/,INTEGER:/^[0-9]+$/,SIGNED_INTEGER:/^-?[0-9]+$/,EMAIL:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,POSTAL_CODE:/^[0-9]{5}$/,SPECIAL_CHARS_REGEX:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,DATE:/^(\d{1,2})[-\/](\d{1,2})[-\/](\d{4})$/},D=function(){function t(t){this.hasError=!1,this.error="Bitte geben Sie eine gültige E-Mail ein",t&&(this.error=t)}return t.prototype.validator=function(){var t=this;return(function(e){return t.value=e.value,t.validate()})},t.prototype.validate=function(){return this.value?this.value&&U.EMAIL.test(this.value.toString())?(this.hasError=!1,null):(this.hasError=!0,{invalidEmail:!0}):null},t}();var O=function(){function t(t,e){void 0===e&&(e=null),this.comparator=t,this.error=e}return t.prototype.validate=function(){return this.hasError=!1,this.comparator===this.value$?null:(this.hasError=!0,{validatorFixed:!0})},t.prototype.validator=function(){var t=this;return(function(e){return t.value$=e.value,t.validate()})},t}();var P=function(){function t(t,e){this.digitsBefore=t,this.digitsAfter=e,this.hasError=!1,this.error="Bitte geben Sie eine valide Zahl ein"}return t.prototype.validator=function(){var t=this;return(function(e){return t.value=e.value,t.validate()})},t.prototype.validate=function(){this.hasError=!1,this.error="Bitte geben Sie eine valide Zahl ein";var t=!1,e=!1;if(!this.value)return null;if(this.value&&U.INPUT_NUMBER.test(this.value.toString())){var r=this.value.toString().split(",");return p.isDefined(this.digitsBefore)&&0===this.digitsAfter&&2===r.length?(this.hasError=!0,this.error="Es sind keine Nachkommastellen erlaubt",{invalidFloat:!0}):2!==r.length?p.isDefined(this.digitsBefore)&&this.value.length>this.digitsBefore?(this.error="Bitte runden Sie die Zahl auf "+(1===this.digitsBefore?"eine Stelle":this.digitsBefore.toString()+" Stellen")+" vor dem Komma",this.hasError=!0,{invalidFloat:!0}):(this.hasError=!1,null):(p.isDefined(this.digitsBefore)&&this.digitsBefore>0?(t=r[0].length<=this.digitsBefore)||(this.error="Bitte runden Sie die Zahl auf "+(1===this.digitsBefore?"eine Stelle":this.digitsBefore.toString()+" Stellen")+" vor dem Komma"):t=!0,p.isDefined(this.digitsAfter)&&this.digitsAfter>0?(e=r[1].length<=this.digitsAfter)||(this.error="Bitte runden Sie die Zahl auf "+(1===this.digitsAfter?" eine Stelle":this.digitsAfter.toString()+" Stellen")+" nach dem Komma"):e=!0,this.hasError=!(t&&e),this.hasError?{invalidFloat:!0}:null)}return this.hasError=!0,{invalidFloat:!0}},t}();var F=function(){function t(t){void 0===t&&(t=!1),this.allowNegativeValues$=t,this.error="Bitte geben Sie eine ganze Zahl ein",this.regex$=t?U.SIGNED_INTEGER:U.INTEGER}return t.prototype.validate=function(){return this.hasError=!1,this.value$?this.regex$.test(this.value$)?null:(this.hasError=!0,{invalidInteger:!0}):null},t.prototype.validator=function(){var t=this;return(function(e){return t.value$=e.value,t.validate()})},t}();var T=function(){function t(t){this.hasError=!1,this.error="Bitte geben Sie eine gültige Postleitzahl ein",t&&(this.error=t)}return t.prototype.validator=function(){var t=this;return(function(e){return t.value=e.value,t.validate()})},t.prototype.validate=function(){return this.hasError=!1,this.value?this.value&&U.POSTAL_CODE.test(this.value.toString())?(this.hasError=!1,null):(this.hasError=!0,{invalidPostalCode:!0}):null},t}();var x=function(){function t(){}return t.toNumber=function(e){return e?r.isNumber(e)?e:r.isString(e)&&U.NUMBER.test(e)?t.convertInputStringToNumber(e):e:e},t.asGermanFloat=function(t,e){if(null!=t)return!r.isUndefined(e)&&r.isNumber(t)&&(t=t.toFixed(e)),t.toString().replace(".",",")},t.booleanNumberToSting=function(t){return 1===t?"Ja":"Nein"},t.asRegex=function(t){var e="";return r.isEmpty(t)?new RegExp(e):(r.each(t.split(""),(function(t){e=e+""+t})),new RegExp(e.replace(U.SPECIAL_CHARS_REGEX,"\\$&"),"i"))},t.booleanToNumber=function(t){return!0===t?1:0},t.numberToBoolean=function(t){return 1===t},t.convertInputStringToNumber=function(t){return t.includes(".")?Number.parseFloat(t):t.includes(",")?Number.parseFloat(t.replace(",",".")):Number.parseInt(t)},t}(),j=function(){function t(){}return t.simpleControl=function(t,e){void 0===t&&(t=null);var r=new b;return r.initialize(t,e),r},t.numberControl=function(e,r){void 0===e&&(e=null);var i=t.simpleControl(e,r);return i.showAs=x.asGermanFloat,i.convertTo=x.toNumber,i.setValue(e),i},t.numberBooleanControl=function(e,r){void 0===e&&(e=null);var i=t.simpleControl(e,r);return i.showAs=x.numberToBoolean,i.convertTo=x.booleanToNumber,i.setValue(e),i},t.dateControl=function(e,r){return void 0===e&&(e=null),t.simpleControl(e,r)},t.trimControl=function(e,r){void 0===e&&(e=null);var i=t.simpleControl(e,r);return i.showAs=function(t){return p.isDefined(t)?t.trim():t},i.convertTo=function(t){return p.isDefined(t)?t.trim():t},i},t}();var N={OK:200,BAD_REQUEST:400,PRECONDITION_FAILED:412,CONFLICT:409,FORBIDDEN:403,NOT_FOUND:404,LOCKED:423,NOT_ACCEPTABLE:406};N[N.OK]="OK",N[N.BAD_REQUEST]="BAD_REQUEST",N[N.PRECONDITION_FAILED]="PRECONDITION_FAILED",N[N.CONFLICT]="CONFLICT",N[N.FORBIDDEN]="FORBIDDEN",N[N.NOT_FOUND]="NOT_FOUND",N[N.LOCKED]="LOCKED",N[N.NOT_ACCEPTABLE]="NOT_ACCEPTABLE";var R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.markForCheckIf=function(t){return this.watch(t,new v(this.cdr.markForCheck.bind(this.cdr)))},e}(m);var k=function(){function t(t,e){this.equals=e,this.changed=new i.Subject,this.value$=t,this.equals=p.isDefined(this.equals)?this.equals:this.defaultComparator}return Object.defineProperty(t.prototype,"value",{get:function(){return this.value$},set:function(t){this.equals(this.value$,t)||(this.value$=t,this.changed.next(t))},enumerable:!0,configurable:!0}),t.prototype.defaultComparator=function(t,e){return t===e},t}();var _=function(t){function r(e){var r=t.call(this)||this;return r.observer=p.isDefined(e)?e:new E,r}return a(r,t),r.prototype.all=function(t,r){var i=this;return new A(this.http,this.url,this.observer).all(t,r).pipe(e.tap((function(t){i.store.updateItems(t)})))},r.prototype.show=function(t,r,i){var n=this;return new A(this.http,this.url,this.observer).show(t,r,i).pipe(e.tap((function(t){n.store.update(t)})))},r}(m);var B=function(t){function r(){return t.call(this,new C)||this}return a(r,t),r.prototype.create=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).create(t,e,r);return this.modifyCreateCall(i)},r.prototype.destroy=function(t,r,i){var n=this;return new d(this.http,this.url,this.observer,this.identifier).destroy(t,r,i).pipe(e.tap((function(){n.store.removeByIdentifier(t)})))},r.prototype.partialUpdate=function(t,r,i){var n=this;return new d(this.http,this.url,this.observer,this.identifier).partialUpdate(t,r,i).pipe(e.tap((function(t){n.store.update(t)})))},r.prototype.save=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).save(t,e,r);return i=p.isDefined(t[this.identifier])?this.modifyUpdateCall(i):this.modifyCreateCall(i)},r.prototype.set=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).set(t,e,r);return i=p.isDefined(t[this.identifier])?this.modifyUpdateCall(i):this.modifyCreateCall(i)},r.prototype.update=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).update(t,e,r);return i=this.modifyUpdateCall(i)},r.prototype.modifyCreateCall=function(t){var r=this;return t.pipe(e.tap((function(t){r.store.push(t)})))},r.prototype.modifyUpdateCall=function(t){var r=this;return t.pipe(e.tap((function(t){r.store.update(t)})))},r}(_);var V=function(){function t(){this.deactivators$={}}return t.prototype.register=function(t,e){this.deactivators$[t]=e},t.prototype.remove=function(t){delete this.deactivators$[t]},t.prototype.canDeactivate=function(){var t=this;return new i.Observable((function(e){t._deactivateComponent(0,e)}))},t.prototype._deactivateComponent=function(t,e){var r=this,i=Object.values(this.deactivators$)[t];i?c.subscribe(i.canDeactivate(),new v((function(i){i?r._deactivateComponent(t+1,e):(e.next(!1),e.complete())}))):(e.next(!0),e.complete())},t}();var q=function(){function t(){this.queue=[]}return t.prototype.canActivate=function(t,e){var r=this;return this.route=t,this.state=e,new i.Observable((function(t){r.runQueueRecursive(0,t)}))},t.prototype.sequence=function(t){return r.isArray(t)?this.queue.push(t):this.queue.push([t]),this},t.prototype.runQueueRecursive=function(t,e){var n=this,o=this.queue[t];if(!p.isDefined(o))return e.next(!0),void e.complete();var s=r.map(o,(function(t){return t.canActivate(n.route,n.state)}));c.subscribe(i.forkJoin(s),new v((function(i){r.all(i)?n.runQueueRecursive(t+1,e):(e.next(!1),e.complete())}),(function(){e.next(!1),e.complete()})))},t}();var M=function(){function t(){}return t.prototype.canActivate=function(t,r){var i=this;return this.route=t,this.state=r,this.onActivate().pipe(e.switchMap((function(t){return i.onSuccess(t)})),e.catchError((function(t){return i.onError(t)})))},Object.defineProperty(t.prototype,"routeConfiguration",{get:function(){return this.route.data.routeConfiguration},enumerable:!0,configurable:!0}),t}();var z=function(){function t(t,e,r){this.pathSegments=t,this.paramNames=e,this.parent=r}return Object.defineProperty(t.prototype,"path",{get:function(){return p.isDefined(this.parent)?this.parent.path+"/"+this.pathSegments.join("/"):this.pathSegments.join("/")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramDefinition",{get:function(){return r.extend(p.isDefined(this.parent)?this.parent.paramDefinition:{},this.paramNames||{})},enumerable:!0,configurable:!0}),t.prototype.buildNavigation=function(t){var e=p.isDefined(this.parent)?this.parent.buildNavigation(t):[];return p.isDefined(t)?e=e.concat(r.map(this.pathSegments,(function(e){var r=t[e.replace(":","")];return p.isDefined(r)?r:e}))):e.concat(this.pathSegments)},t.prototype.validate=function(){for(var t in this.pathSegments){if(!p.isDefined(t))return console.error("Creating a route without a path snippet is not allowed"),!1;if(t.startsWith("/"))return console.error("Creating a route with a path snippet starting with a / is not allowed"),!1;if(t.endsWith("/"))return console.error("Creating a route with a path snippet ending with a / is not allowed"),!1}return!0},t}();var L=function(){function t(){}return t.prototype.resolve=function(t,e){return this.route=t,this.state=e,this.onResolve()},Object.defineProperty(t.prototype,"routeConfiguration",{get:function(){return this.route.data.routeConfiguration},enumerable:!0,configurable:!0}),t}();var G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.observables=[],e}return a(e,t),e.prototype.listenTo=function(t,e){var r=this;this.observables.push(t),t.isVisible.value=!0,this.watch(t.nextRequested,new v((function(i){r.onNextRequested(t,i,e)})))},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),r.each(this.observables,(function(t){return t.isVisible.value=!1}))},e.prototype.onNextRequested=function(t,e,r){var i=this;this.subscribe(this.canDeactivate(),new v((function(n){n&&r.resolve(i.activatedRoute,e,t)})))},e}(R);var K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.all=function(e,r){return this.store.isStoreValid()?i.of(this.store.items):t.prototype.all.call(this,e,r)},e.prototype.show=function(e,n,o){if(this.store.isItemValid(e)){var s={};return s[this.identifier]=e,i.of(r.find(this.store.items,s))}return t.prototype.show.call(this,e,n,o)},e}(_);var W=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.observer=new C,e}return a(r,t),r.prototype.create=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).create(t,e,r);return this.modifyCreateCall(i)},r.prototype.destroy=function(t,r,i){var n=this;return new d(this.http,this.url,this.observer,this.identifier).destroy(t,r,i).pipe(e.tap((function(){n.store.removeByIdentifier(t)})))},r.prototype.partialUpdate=function(t,r,i){var n=this;return new d(this.http,this.url,this.observer,this.identifier).partialUpdate(t,r,i).pipe(e.tap((function(t){n.store.update(t)})))},r.prototype.save=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).save(t,e,r);return i=p.isDefined(t[this.identifier])?this.modifyUpdateCall(i):this.modifyCreateCall(i)},r.prototype.set=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).set(t,e,r);return i=p.isDefined(t[this.identifier])?this.modifyUpdateCall(i):this.modifyCreateCall(i)},r.prototype.update=function(t,e,r){var i=new d(this.http,this.url,this.observer,this.identifier).update(t,e,r);return i=this.modifyUpdateCall(i)},r.prototype.modifyCreateCall=function(t){var r=this;return t.pipe(e.tap((function(t){r.store.push(t)})))},r.prototype.modifyUpdateCall=function(t){var r=this;return t.pipe(e.tap((function(t){r.store.update(t)})))},r}(K);var Q=function(){function t(e,r,i){this.router=e,this.routeConfiguration=r,this.configuration=i,this.configuration=i||t.generateDefaultConfiguration()}return t.prototype.runResolver=function(t,e){var i=r.extend(r.clone(t.snapshot.params),e);return this.configuration.keepQueryParams?this.router.navigate(this.routeConfiguration.buildNavigation(i),{queryParams:t.snapshot.queryParams}):this.router.navigate(this.routeConfiguration.buildNavigation(i))},t.generateDefaultConfiguration=function(){return{keepQueryParams:!1}},t}();var Z=function(t){function e(e,r,i){var n=t.call(this,e,i)||this;return n.itemLifetimeInSeconds=r,n.wasFilled=!1,n}return a(e,t),e.prototype.updateItems=function(e){var i=this;t.prototype.updateItems.call(this,e),r.each(this.items,(function(t){return i.trackItem(t)})),this.wasFilled=!0},e.prototype.clear=function(){t.prototype.clear.call(this),this.wasFilled=!1},e.prototype.update=function(e){t.prototype.update.call(this,e),this.trackItem(e)},e.prototype.push=function(e){t.prototype.push.call(this,e),this.trackItem(e)},e.prototype.isItemValid=function(t){var r,i,n=null;try{for(var o=u(this.items),s=o.next();!s.done;s=o.next()){var a=s.value;if(a[this.identifier]===t){n=a;break}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!!p.isDefined(n)&&p.getCurrentUnixTimestamp()-this.itemLifetimeInSeconds<n[e.ITEM_TIMESTAMP_KEY]},e.prototype.isStoreValid=function(){var t=this;return!!this.wasFilled&&(!r.isEmpty(this.items)&&r.all(this.items,(function(e){return t.isItemValid(e[t.identifier])})))},e.prototype.trackItem=function(t){t[e.ITEM_TIMESTAMP_KEY]=p.getCurrentUnixTimestamp()},e.ITEM_TIMESTAMP_KEY="__timestamp__",e}(f);t.AbstractActivationGuard=M,t.AbstractActivationQueuedGuard=q,t.AbstractCachedRestservice=W,t.AbstractEntityResolver=Q,t.AbstractReadonlyCachedRestservice=K,t.AbstractReadonlyRestservice=S,t.AbstractResolver=L,t.AbstractRestservice=$,t.AbstractRouteConfiguration=z,t.AbstractStoredReadonlyRestservice=_,t.AbstractStoredRestservice=B,t.AccessableControlFactory=j,t.AccessableFormArray=I,t.AccessableFormControl=b,t.AccessableFormGroup=g,t.BaseObject=m,t.BasePushStrategyObject=R,t.BaseRootComponent=G,t.DeactivationHandler=V,t.HttpStatusCodes=N,t.ItemStore=f,t.ObservableValue=k,t.REGEX=U,t.ReadonlyRestHandler=A,t.RestHandler=d,t.SubscriptionHandler=v,t.SubscriptionManager=c,t.TimestampItemStore=Z,t.TypeConverter=x,t.Util=p,t.ValidatorCustom=w,t.ValidatorEmail=D,t.ValidatorFixedValue=O,t.ValidatorFloat=P,t.ValidatorInteger=F,t.ValidatorPostalCode=T,t.ValidatorRequired=y,t.ɵa=C,t.ɵb=E,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=mrd-core.umd.min.js.map